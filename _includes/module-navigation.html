<!-- _includes/module-navigation.html -->
<style>
.module-nav { 
  margin: 60px 0 40px; padding: 20px; background: #e3f2fd; border-radius: 12px; 
  text-align: center; font-size: 1.1em; box-shadow: 0 2px 8px rgba(0,0,0,0.1); 
  font-family: 'Segoe UI', sans-serif;
}
.module-nav a { color: #1e40af; font-weight: 600; text-decoration: none; }
.module-nav a:hover { text-decoration: underline; }
.module-nav .debug { font-size: 0.8em; color: #dc2626; margin-top: 10px; }
</style>

{% assign sorted_posts = site.posts | sort: 'date' | reverse %}
{% assign prev_post = null %}
{% assign next_post = null %}
{% assign current_date = page.date | date: "%Y-%m-%d" %}
{% assign found = false %}

<!-- DEBUG: List all post dates -->
<div class="debug">
  <strong>DEBUG:</strong> Current page date: <code>{{ current_date }}</code><br>
  All post dates: 
  {% for p in sorted_posts %}
    <code>{{ p.date | date: "%Y-%m-%d" }}</code>{% if forloop.last == false %}, {% endif %}
  {% endfor %}
</div>

{% for post in sorted_posts %}
  {% assign post_date = post.date | date: "%Y-%m-%d" %}
  {% if post_date == current_date %}
    {% assign found = true %}
    {% assign current_index = forloop.index0 %}
    {% if current_index > 0 %}
      {% assign prev_post = sorted_posts[current_index - 1] %}
    {% endif %}
    {% if current_index < sorted_posts.size - 1 %}
      {% assign next_post = sorted_posts[current_index + 1] %}
    {% endif %}
    {% break %}
  {% endif %}
{% endfor %}

<nav class="module-nav">
  <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 15px; align-items: center;">
    
    <!-- Previous -->
    {% if prev_post %}
      <a href="{{ prev_post.url | relative_url }}">
        ← Previous: {{ prev_post.title | truncate: 45 }}
      </a>
    {% elsif current_date == '2025-10-28' %}
      <span style="color: #94a3b8;">← No Previous (Start Here!)</span>
    {% else %}
      <span style="color: #94a3b8;">← No Previous</span>
    {% endif %}

    <!-- Next -->
    {% if next_post %}
      <a href="{{ next_post.url | relative_url }}">
        Next: {{ next_post.title | truncate: 45 }} →
      </a>
    {% elsif current_date == '2025-11-15' %}
      <span style="color: #94a3b8;">No Next → (Congratulations!)</span>
    {% else %}
      <span style="color: #94a3b8;">No Next →</span>
    {% endif %}

  </div>
</nav>

<!-- FINAL DEBUG -->
<div class="debug">
  <strong>RESULT:</strong> 
  Found match: <strong>{{ found }}</strong> | 
  Prev URL: <code>{{ prev_post.url | default: 'null' }}</code> | 
  Next URL: <code>{{ next_post.url | default: 'null' }}</code>
</div>
