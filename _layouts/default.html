<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }} - {{ site.title }}</title>
    <meta name="description" content="{{ page.description }}">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Minima default CSS -->
    {{ site.theme.css | relative_url }}

    <!-- YOUR CUSTOM CSS -->
    <link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

    {% feed_meta %}
    {% seo %}
    
    <!-- Dark/Light Mode CSS Variables -->
    <style>
      /* CSS Custom Properties for Theming */
      :root {
        /* Light Theme (Default) */
        --bg-color: #ffffff;
        --text-color: #2d3748;
        --heading-color: #1a202c;
        --link-color: #3182ce;
        --border-color: #e2e8f0;
        --card-bg: #f7fafc;
        --code-bg: #edf2f7;
        --footer-border: #eee;
        --footer-text: #666;
        --nav-bg-lightgreen: #90ee90;
        --nav-text-lightgreen: #004400;
        --nav-bg-lightblue: #87cefa;
        --nav-text-lightblue: #003366;
        --nav-bg-orange: linear-gradient(90deg, #ff9900, #ff6600);
        --nav-text-orange: #fff;
      }

      .dark-mode {
        /* Dark Theme */
        --bg-color: #1a1a1a;
        --text-color: #e2e8f0;
        --heading-color: #f7fafc;
        --link-color: #63b3ed;
        --border-color: #4a5568;
        --card-bg: #2d3748;
        --code-bg: #2d3748;
        --footer-border: #444;
        --footer-text: #aaa;
        --nav-bg-lightgreen: #2d5a2d;
        --nav-text-lightgreen: #90ee90;
        --nav-bg-lightblue: #2d4a5a;
        --nav-text-lightblue: #87cefa;
        --nav-bg-orange: linear-gradient(90deg, #cc7a00, #994c00);
        --nav-text-orange: #ffd699;
      }

      /* Apply theme variables to body and elements */
      body {
        background-color: var(--bg-color);
        color: var(--text-color);
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      h1, h2, h3, h4, h5, h6 {
        color: var(--heading-color);
      }

      a {
        color: var(--link-color);
      }

      code {
        background-color: var(--code-bg);
      }

      /* Header and navigation theming */
      header {
        border-bottom-color: var(--border-color) !important;
      }

      .nav-button-lightgreen {
        background-color: var(--nav-bg-lightgreen) !important;
        color: var(--nav-text-lightgreen) !important;
      }

      .nav-button-lightblue {
        background-color: var(--nav-bg-lightblue) !important;
        color: var(--nav-text-lightblue) !important;
      }

      .nav-button-orange {
        background: var(--nav-bg-orange) !important;
        color: var(--nav-text-orange) !important;
      }

      /* Footer theming */
      footer {
        border-top-color: var(--footer-border) !important;
        color: var(--footer-text) !important;
      }

      /* Main content area */
      .container {
        background-color: var(--bg-color);
      }

      /* Dark mode toggle button positioning */
      #dark-mode-toggle-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
      }
    </style>
    
    <script>
      function toggleDarkMode() {
        const body = document.body;
        const toggle = document.getElementById('dark-mode-toggle');
        const icon = document.getElementById('toggle-icon');

        if (body.classList.contains('dark-mode')) {
          // Switch to Light
          body.classList.remove('dark-mode');
          localStorage.setItem('theme', 'light');
          icon.textContent = 'üåô';
          toggle.style.background = '#ff6600';
          toggle.title = 'Switch to Dark Mode';
        } else {
          // Switch to Dark
          body.classList.add('dark-mode');
          localStorage.setItem('theme', 'dark');
          icon.textContent = '‚òÄÔ∏è';
          toggle.style.background = '#1a1a1a';
          toggle.title = 'Switch to Light Mode';
        }
      }

      // On page load: Apply saved preference
      document.addEventListener('DOMContentLoaded', () => {
        const saved = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        const toggle = document.getElementById('dark-mode-toggle');
        const icon = document.getElementById('toggle-icon');

        if (saved === 'dark' || (!saved && prefersDark)) {
          document.body.classList.add('dark-mode');
          icon.textContent = '‚òÄÔ∏è';
          toggle.style.background = '#1a1a1a';
          toggle.title = 'Switch to Light Mode';
        } else {
          icon.textContent = 'üåô';
          toggle.title = 'Switch to Dark Mode';
        }
      });
    </script>
  </head>
  <body>
    <div class="container">
      <!-- HEADER -->
      <header style="margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px solid #eee;">

        <!-- Navigation Buttons -->
        <nav style="margin-top:0.5rem; display:flex; gap:10px; flex-wrap:wrap; align-items:center;">

          <!-- AWS Zero to Architect (Light Green Fancy Font Button) -->
          <a href="{{ site.baseurl }}/" class="nav-button-lightgreen" style="
            display:inline-block;
            padding:8px 18px;
            font-weight:700;
            border-radius:10px;
            text-decoration:none;
            font-family:'Poppins', 'Segoe UI', sans-serif;
            font-size:1.1rem;
            transition:all 0.3s ease;
            box-shadow:0 2px 4px rgba(0,0,0,0.1);
          " onmouseover="this.style.transform='translateY(-2px)';" 
            onmouseout="this.style.transform='translateY(0)';">
            ‚òÅÔ∏è {{ site.title }}
          </a>

          <!-- About Button (Light Blue) -->
          <a href="{{ site.baseurl }}/about" class="nav-button-lightblue" style="
            display:inline-block;
            padding:8px 16px;
            font-weight:600;
            border-radius:10px;
            text-decoration:none;
            font-family:'Poppins', 'Segoe UI', sans-serif;
            transition:all 0.3s ease;
            box-shadow:0 2px 4px rgba(0,0,0,0.1);
          " onmouseover="this.style.transform='translateY(-2px)';" 
            onmouseout="this.style.transform='translateY(0)';">
            About
          </a>

          <!-- Main Index Button (Orange Gradient) -->
          <a href="https://asiandevs.github.io/aws-zero-to-architect-blog/#module-index" class="nav-button-orange" style="
            display:inline-block;
            padding:8px 16px;
            font-weight:bold;
            border-radius:10px;
            text-decoration:none;
            font-family:'Poppins', 'Segoe UI', sans-serif;
            transition:all 0.3s ease;
            box-shadow:0 2px 4px rgba(0,0,0,0.1);
          " onmouseover="this.style.transform='translateY(-2px)';" 
            onmouseout="this.style.transform='translateY(0)';">
            üè† Main Index
          </a>
        </nav>
      </header>

      <!-- MAIN CONTENT -->
      <main>
        {{ content }}
      </main>

      <!-- FOOTER -->
      <footer style="margin-top: 3rem; padding-top: 1rem; border-top: 1px solid #eee; font-size:0.9rem; color:#666; text-align:center;">
        ¬© {{ site.time | date: '%Y' }} {{ site.title }} ‚Ä¢ Built with Jekyll on GitHub Pages
      </footer>
    </div>

    <!-- Dark Mode Toggle -->
    <div id="dark-mode-toggle-container">
      <button id="dark-mode-toggle" 
        style="
          width: 50px; height: 50px;
          border-radius: 50%;
          background: #ff6600;
          border: none;
          color: white;
          font-size: 1.4em;
          cursor: pointer;
          box-shadow: 0 4px 15px rgba(255,102,0,0.4);
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
        "
        onclick="toggleDarkMode()"
        onmouseover="this.style.transform='scale(1.1)'; this.style.boxShadow='0 6px 20px rgba(255,102,0,0.5)';"
        onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 4px 15px rgba(255,102,0,0.4)';"
      >
        <span id="toggle-icon">üåô</span>
      </button>
    </div>
    {{ content }}

<!-- Add this line at the bottom of your layout -->
{% include module-navigation.html %}
  </body>
</html>
